@inject IToastService toast

<div class="dialog-container">
    <div class="dialog">
        <EditForm Model="prestamo" OnValidSubmit="Guardar">
            <div class="dialog-title">
                <h2 id="title-r-prestamos">@(EsNuevoPrestamo ? "Nuevo prestamo" : "Editar prestamo")</h2>
            </div>
            <div class="dialog-body">

                <FieldsPrestamo Prestamo="prestamo" />

            </div>
            <div class="dialog-buttons">
                <button type="button" class="btn btn-dark" @onclick="OnClose">Cancelar</button>
                <button type="button" disabled="@(!EsNuevoPrestamo)" class="btn btn-warning" @onclick="Nuevo">Nuevo</button>
                <input type="submit" class="btn btn-success" value="Guardar" />
                <button type="button" disabled="@(EsNuevoPrestamo)" class="btn btn-danger" @onclick="Eliminar">Eliminar</button>
            </div>
            <DataAnnotationsValidator />
        </EditForm>
    </div>
</div>

@code {

    [Parameter] public Prestamo prestamo { get; set; }
    [Parameter] public EventCallback OnClose { get; set; }
    [Parameter] public bool EsNuevoPrestamo { get; set; } // Para saber si va a editar o modificar

    void Nuevo() {
        prestamo = new Prestamo();
    }
    async Task Guardar() {


        bool guardo;

        guardo = await PrestamosBLL.Guardar(prestamo);

        if (guardo) {
            toast.ShowSuccess("Guardado ");
            Nuevo();
            await OnClose.InvokeAsync(new { });
        } else
            toast.ShowError("Error al guardar");
    }

    async Task Eliminar() {
        bool eliminado;

        eliminado = await PrestamosBLL.Eliminar(prestamo.Id);

        if (eliminado) {
            toast.ShowSuccess("Eliminado");
            Nuevo();
            await OnClose.InvokeAsync(new { });
        } else
            toast.ShowError("Error al eliminar");
    }

}